#!/bin/bash

# Wrapper for deprecated ch-grow script. Warn users and pass arguments to
# ch-image after five (5) seconds.

lib=$(cd "$(dirname "$0")" && pwd)/../lib/charliecloud
. "${lib}/base.sh"

usage () {
    cat <<'EOF'
usage: ch-grow [-h] [--dependencies] [--no-cache] [-s DIR] [-v] [--version] CMD

Renamed to ch-image. Will be removed in 0.23. See ch-image.
EOF
}

for arg in "$@"; do
    if [[ $arg == '--help' || $arg == '-h' ]]; then
        usage
        exit 0
    fi
done

cat <<'EOF'

WARNING: ch-grow has been renamed to ch-image. The old name will be removed in
version 0.23. Forwarding arguments to ch-image after five (5) seconds.


EOF
sleep 5
"${ch_bin}/ch-image" "$@"
cat <<'EOF'

WARNING: ch-grow has been renamed to ch-image. The old name will be removed in
version 0.23.


EOF
